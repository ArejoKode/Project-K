<!doctype html>
<html lang="zh-Hant">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>éš¨æ©ŸæŠ½ç API ç·´ç¿’</title>
  <style>
    button {
      padding: 8px 14px;
      cursor: pointer;
    }

    img {
      max-width: 300px;
      border-radius: 8px;
      margin-top: 10px;
    }
  </style>
</head>

<body>
  <h1>ğŸ±å–µå–µå–µ~ä¾†æŠ½ç ğŸ±</h1>

  <button class="btn">æŠ½èµ·</button>

  <div class="inner">
    <h2 class="prizeText"></h2>
    <img class="prizeImg" src="" alt="">
  </div>

  <script>
    const btn = document.querySelector('.btn');
    const prizeTextEl = document.querySelector('.prizeText'); // ç”¨ä¾†é¡¯ç¤ºæ–‡å­—
    const prizeImgEl = document.querySelector('.prizeImg'); // ç”¨ä¾†é¡¯ç¤ºåœ–ç‰‡

    btn.addEventListener('click', async () => {
      btn.disabled = true;
      btn.textContent = "loading~";

      try {
        const res = await fetch('https://dvwhnbka7d.execute-api.us-east-1.amazonaws.com/default/lottery');
        const data = await res.json();

        let text = '';
        let img = '';

        switch (data.prize) {
          case "FIRST":
            text = 'æ­å–œä½ ä¸­é ­çäº†ï¼æ—¥æœ¬æ±äº¬ä¾†å›é›™äººéŠï¼';
            img.src = "https://pixabay.com/photos/flight-plane-close-look-airplane-4315953/";
            break;
          case "SECOND":
            text = 'äºŒçï¼90 å‹é›»è¦–ä¸€å°ï¼';
            img.src = "https://pixabay.com/photos/flight-plane-close-look-airplane-4315953/";
            break;
          case "THIRD":
            text = 'æ­å–œä½ æŠ½ä¸­ä¸‰çï¼šçŸ¥å YouTuber ç°½åæ¡æ‰‹æœƒå…¥å ´åˆ¸ä¸€å¼µï¼Œbangï¼';
            img.src = "https://pixabay.com/photos/youtube-iphone-smartphone-mobile-2617510/";
            break;
          case "NONE":
            text = 'éŠ˜è¬æƒ é¡§ï¼';
            img.src = "https://pixabay.com/photos/flight-plane-close-look-airplane-4315953/";
            break;
          default:
            text = "æœªçŸ¥çé …";
            img = "";
        }

        // é¡¯ç¤ºçµæœ
        prizeTextEl.textContent = text;
        prizeImgEl.src = img;
        prizeImgEl.alt = data.prize;

      } catch (err) {
        console.error('éŒ¯èª¤:', err);
        prizeTextEl.textContent = 'ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ ğŸ˜¿';
        prizeImgEl.src = '';
        prizeImgEl.alt = '';
      } finally {
        btn.disabled = false;
        btn.textContent = "æŠ½èµ·";
      }
    });
  </script>
</body>

</html>